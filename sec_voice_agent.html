<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„Ø°ÙƒÙŠ - Ø§Ù„Ø´Ø±ÙƒØ© Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ© Ù„Ù„ÙƒÙ‡Ø±Ø¨Ø§Ø¡</title>
    <!-- Vapi SDK Import: Using the official, reliable UMD link for global browser access -->
    <script src="https://cdn.jsdelivr.net/npm/@vapi-ai/web@2.3.3/dist/web.min.js" type="application/javascript"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            /* Using SEC theme colors: Deep Blue #0047AB, Bright Orange #FF8C42 */
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #e8eef5 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* Header */
        .header {
            background: white;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            padding: 1rem 2rem;
            position: relative;
        }

        .header-content {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo-section {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .logo {
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, #0047AB 0%, #1E5BA8 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 15px rgba(0, 71, 171, 0.3);
        }

        .logo-icon {
            width: 30px;
            height: 30px;
            /* Using orange accent for a stylized icon/placeholder */
            border: 3px solid #FF8C42;
            border-radius: 50%;
            border-top-color: transparent;
            border-left-color: transparent;
        }

        .company-name {
            display: flex;
            flex-direction: column;
        }

        .company-name h1 {
            color: #0047AB;
            font-size: 1.3rem;
            font-weight: 700;
        }

        .company-name p {
            color: #FF8C42;
            font-size: 0.9rem;
            margin-top: 2px;
        }

        .website-link {
            color: #0047AB;
            text-decoration: none;
            font-weight: 600;
            font-size: 1rem;
            transition: color 0.3s;
        }

        .website-link:hover {
            color: #FF8C42;
        }

        /* Main Container */
        .container {
            flex: 1;
            max-width: 800px;
            margin: 2rem auto;
            padding: 0 1rem;
            width: 100%;
        }

        /* Card */
        .card {
            background: white;
            border-radius: 20px;
            box-shadow: 0 10px 40px rgba(0, 71, 171, 0.1);
            padding: 3rem 2rem;
            text-align: center;
            animation: fadeIn 0.5s ease-in;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .card-header {
            margin-bottom: 2rem;
        }

        .badge {
            display: inline-block;
            background: linear-gradient(135deg, #0047AB 0%, #1E5BA8 100%);
            color: white;
            padding: 0.5rem 1.5rem;
            border-radius: 50px;
            font-size: 0.9rem;
            font-weight: 600;
            margin-bottom: 1.5rem;
            box-shadow: 0 4px 15px rgba(0, 71, 171, 0.2);
        }

        .main-title {
            color: #2C3E50;
            font-size: 2.2rem;
            font-weight: 700;
            margin-bottom: 1rem;
        }

        .subtitle {
            color: #7F8C8D;
            font-size: 1.1rem;
            line-height: 1.6;
            max-width: 600px;
            margin: 0 auto;
        }

        /* Voice Button Container */
        .voice-container {
            margin: 3rem 0;
            position: relative;
        }

        .pulse-ring {
            width: 180px;
            height: 180px;
            border-radius: 50%;
            background: linear-gradient(135deg, rgba(0, 71, 171, 0.1) 0%, rgba(255, 140, 66, 0.1) 100%);
            margin: 0 auto;
            display: flex;
            align-items: center;
            justify-content: center;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% {
                box-shadow: 0 0 0 0 rgba(0, 71, 171, 0.4);
            }
            70% {
                box-shadow: 0 0 0 30px rgba(0, 71, 171, 0);
            }
            100% {
                box-shadow: 0 0 0 0 rgba(0, 71, 171, 0);
            }
        }

        /* Status */
        .status {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            color: #7F8C8D;
            font-size: 1rem;
            margin: 2rem 0;
        }

        .status-dot {
            width: 10px;
            height: 10px;
            background: #95A5A6;
            border-radius: 50%;
        }

        .status.connected .status-dot {
            background: #27AE60; /* Green for connected */
            animation: blink 2s infinite;
        }
        
        .status.speaking .status-dot {
            background: #FF8C42; /* Orange for speaking */
            animation: none;
        }
        
        .status.connecting .status-dot {
            background: #0047AB; /* Blue for connecting */
            animation: blink 1s infinite;
        }

        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.3; }
        }

        /* Action Button */
        .action-button {
            background: linear-gradient(135deg, #0047AB 0%, #1E5BA8 100%);
            color: white;
            border: none;
            padding: 1rem 3rem;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 6px 20px rgba(0, 71, 171, 0.3);
            margin-bottom: 2rem;
        }

        .action-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 71, 171, 0.4);
        }

        .action-button:active {
            transform: translateY(0);
        }

        /* Quick Actions */
        .quick-actions {
            border-top: 1px solid #E8EEF5;
            padding-top: 2rem;
            margin-top: 2rem;
        }

        .quick-actions-title {
            color: #7F8C8D;
            font-size: 0.9rem;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }

        .quick-actions-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-top: 1rem;
        }

        .quick-action-card {
            background: linear-gradient(135deg, #F8F9FA 0%, #E8EEF5 100%);
            border-radius: 12px;
            padding: 1.5rem;
            cursor: pointer;
            transition: all 0.3s;
            border: 2px solid transparent;
            text-align: right;
        }

        .quick-action-card:hover {
            transform: translateY(-3px);
            border-color: #0047AB;
            box-shadow: 0 6px 20px rgba(0, 71, 171, 0.15);
        }

        .quick-action-title {
            color: #2C3E50;
            font-weight: 600;
            margin-bottom: 0.5rem;
            font-size: 1rem;
        }

        .quick-action-desc {
            color: #7F8C8D;
            font-size: 0.85rem;
            line-height: 1.4;
        }

        /* Footer */
        .footer {
            background: white;
            padding: 1.5rem 2rem;
            text-align: center;
            color: #7F8C8D;
            font-size: 0.9rem;
            border-top: 1px solid #E8EEF5;
            margin-top: 2rem;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <div class="header">
        <div class="header-content">
            <div class="logo-section">
                <div class="logo">
                    <!-- Placeholder icon using SEC colors -->
                    <div class="logo-icon"></div>
                </div>
                <div class="company-name">
                    <h1>Ø§Ù„Ø´Ø±ÙƒØ© Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ© Ù„Ù„ÙƒÙ‡Ø±Ø¨Ø§Ø¡</h1>
                    <p>Ù†Ø¹Ù…Ù„ Ø¨Ø¥ØªÙ‚Ø§Ù† Ù…Ù† Ø£Ø¬Ù„ÙƒÙ…</p>
                </div>
            </div>
            <a href="https://www.se.com.sa" class="website-link" target="_blank">www.se.com.sa</a>
        </div>
    </div>

    <!-- Main Container -->
    <div class="container">
        <div class="card">
            <div class="card-header">
                <div class="badge">ğŸ¤– Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„Ø°ÙƒÙŠ</div>
                <h2 class="main-title">Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ Ù„Ø®Ø¯Ù…Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡</h2>
                <p class="subtitle">
                    Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ Ù„Ø®Ø¯Ù…Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ - Ø§Ù„ÙÙˆØ§ØªÙŠØ±ØŒ Ø§Ù„Ø§Ù†Ù‚Ø·Ø§Ø¹Ø§ØªØŒ ÙˆØ§Ù„Ø´ÙƒØ§ÙˆÙ‰ Ø§Ù„ÙÙ†ÙŠØ©
                </p>
            </div>

            <div class="voice-container">
                <div class="pulse-ring">
                    <!-- Microphone SVG Icon -->
                    <svg width="100" height="100" viewBox="0 0 100 100" fill="none">
                        <circle cx="50" cy="50" r="40" fill="url(#gradient)" />
                        <path d="M50 30 C50 30 42 35 42 45 L42 55 C42 65 50 70 50 70 C50 70 58 65 58 55 L58 45 C58 35 50 30 50 30 Z" fill="white"/>
                        <rect x="47" y="70" width="6" height="10" fill="white"/>
                        <rect x="40" y="78" width="20" height="4" rx="2" fill="white"/>
                        <defs>
                            <linearGradient id="gradient" x1="0" y1="0" x2="100" y2="100">
                                <stop offset="0%" style="stop-color:#0047AB;stop-opacity:1" />
                                <stop offset="100%" style="stop-color:#FF8C42;stop-opacity:1" />
                            </linearGradient>
                        </defs>
                    </svg>
                </div>
            </div>

            <div class="status" id="status">
                <span class="status-dot"></span>
                <span>ØºÙŠØ± Ù…ØªØµÙ„</span>
            </div>

            <!-- This is the custom button that triggers the JS function -->
            <button class="action-button" id="startButton" onclick="startConversation()">
                ğŸ™ï¸ Ø§Ø¨Ø¯Ø£ Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø©
            </button>

            <div class="quick-actions">
                <div class="quick-actions-title">
                    âš¡ Ø¬Ø±Ø¨ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„ØªØ§Ù„ÙŠØ©
                </div>
                <div class="quick-actions-grid">
                    <div class="quick-action-card" data-prompt="Ù„ÙŠØ´ ÙØ§ØªÙˆØ±ØªÙŠ Ø§Ø±ØªÙØ¹Øª Ù‡Ø§Ù„Ø´Ù‡Ø±ØŸ">
                        <div class="quick-action-title">Ù„ÙŠØ´ ÙØ§ØªÙˆØ±ØªÙŠ Ø§Ø±ØªÙØ¹Øª Ù‡Ø§Ù„Ø´Ù‡Ø±ØŸ</div>
                        <div class="quick-action-desc">Ø§Ø³ØªÙØ³Ø§Ø± Ø¹Ù† Ø§Ø±ØªÙØ§Ø¹ Ø§Ø³ØªÙ‡Ù„Ø§Ùƒ Ø§Ù„ÙƒÙ‡Ø±Ø¨Ø§Ø¡ ÙˆØ§Ù„ÙØ§ØªÙˆØ±Ø©</div>
                    </div>
                    <div class="quick-action-card" data-prompt="Ø¹Ù†Ø¯ÙŠ Ø§Ù†Ù‚Ø·Ø§Ø¹ ÙƒÙ‡Ø±Ø¨Ø§Ø¡ Ø¨Ø§Ù„Ø¨ÙŠØª">
                        <div class="quick-action-title">Ø¹Ù†Ø¯ÙŠ Ø§Ù†Ù‚Ø·Ø§Ø¹ ÙƒÙ‡Ø±Ø¨Ø§Ø¡ Ø¨Ø§Ù„Ø¨ÙŠØª</div>
                        <div class="quick-action-desc">Ø§Ù„Ø¥Ø¨Ù„Ø§Øº Ø¹Ù† Ø§Ù†Ù‚Ø·Ø§Ø¹ Ø§Ù„ØªÙŠØ§Ø± Ø§Ù„ÙƒÙ‡Ø±Ø¨Ø§Ø¦ÙŠ ÙˆÙØªØ­ Ø¨Ù„Ø§Øº</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <div class="footer">
        <p>Â© 2024 Ø§Ù„Ø´Ø±ÙƒØ© Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ© Ù„Ù„ÙƒÙ‡Ø±Ø¨Ø§Ø¡ - Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©</p>
    </div>

    
    <script>
        // Use a standard script block to ensure global scope for onclick attributes

        // Vapi configuration constants
        const VAPI_PUBLIC_KEY = '1f2432da-8fee-4c9e-af48-674fa145d001';
        const VAPI_ASSISTANT_ID = 'e2a656f8-5bfc-4cb1-993d-9db82a69bd79';
        
        // UI element references
        const startButton = document.getElementById('startButton');
        const statusEl = document.getElementById('status');
        
        let vapi = null; // Initialize vapi as null
        let isCallActive = false;

        /**
         * Initializes the Vapi client and sets up event listeners.
         * This function runs once when the page loads.
         */
        function initializeVapi() {
            // Check if Vapi object is globally available (from the CDN script tag)
            if (typeof Vapi !== 'undefined') {
                vapi = new Vapi(VAPI_PUBLIC_KEY);
                console.log('Vapi SDK initialized successfully.');

                // --- Vapi Event Listeners ---
                vapi.on('call-start', () => {
                    console.log('Vapi Call started');
                    isCallActive = true;
                    updateButton(true);
                    updateStatus('connected', 'Ù…ØªØµÙ„ - ØªØ­Ø¯Ø« Ø§Ù„Ø¢Ù†');
                });

                vapi.on('call-end', () => {
                    console.log('Vapi Call ended');
                    isCallActive = false;
                    updateButton(false);
                    updateStatus('disconnected', 'ØºÙŠØ± Ù…ØªØµÙ„');
                });

                vapi.on('speech-start', () => {
                    console.log('Assistant started speaking');
                    updateStatus('speaking', 'Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯ ÙŠØªØ­Ø¯Ø«...');
                });

                vapi.on('speech-end', () => {
                    console.log('Assistant stopped speaking');
                    // If the call is still active, return to listening state
                    if (isCallActive) {
                        updateStatus('connected', 'Ù…ØªØµÙ„ - ØªØ­Ø¯Ø« Ø§Ù„Ø¢Ù†');
                    }
                });
                
                vapi.on('message', (message) => {
                    // Logs messages from the assistant
                    if (message.message.role === 'assistant' && message.message.content) {
                        console.log('Assistant message:', message.message.content);
                    }
                });

                vapi.on('error', (error) => {
                    console.error('Vapi Error:', error);
                    isCallActive = false;
                    updateButton(false);
                    updateStatus('disconnected', 'Ø®Ø·Ø£: ' + (error.message || 'ÙØ´Ù„ Ø§Ù„Ø§ØªØµØ§Ù„.'));
                });
            } else {
                 // Log a clearer message if Vapi is missing
                 console.error("Vapi SDK is not available. Check the CDN link in the header.");
                 // We rely on the global Vapi object, so if it's missing, Vapi isn't loaded.
                 // We don't try to update status here, as it might also fail if DOM isn't ready.
            }
        }

        /**
         * Updates the connection status indicator on the UI.
         * @param {string} status 'connected', 'connecting', 'speaking', or 'disconnected'
         * @param {string} text The text to display next to the dot.
         */
        function updateStatus(status, text) {
            if (statusEl) {
                statusEl.className = 'status'; // Reset classes
                
                if (status === 'connected') {
                    statusEl.classList.add('connected');
                } else if (status === 'connecting') {
                    statusEl.classList.add('connecting');
                } else if (status === 'speaking') {
                    statusEl.classList.add('speaking');
                }

                statusEl.innerHTML = `<span class="status-dot"></span><span>${text}</span>`;
            }
        }

        /**
         * Updates the main action button text and style.
         * @param {boolean} isActive True if the call is active.
         */
        function updateButton(isActive) {
            if (startButton) {
                if (isActive) {
                    startButton.textContent = 'â¹ï¸ Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ù…ÙƒØ§Ù„Ù…Ø©';
                    // Use a warning/stop color (red/orange)
                    startButton.style.background = 'linear-gradient(135deg, #e74c3c 0%, #c0392b 100%)'; 
                } else {
                    startButton.textContent = 'ğŸ™ï¸ Ø§Ø¨Ø¯Ø£ Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø©';
                    // Use the primary SEC blue color
                    startButton.style.background = 'linear-gradient(135deg, #0047AB 0%, #1E5BA8 100%)';
                }
            }
        }

        /**
         * Starts or stops the Vapi conversation. This function is exposed globally.
         */
        window.startConversation = async function() {
            if (!vapi) {
                console.error("Vapi SDK not initialized. Cannot start conversation.");
                updateStatus('disconnected', 'Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªÙ‡ÙŠØ¦Ø©.');
                return;
            }

            if (isCallActive) {
                // End the call
                vapi.stop();
            } else {
                // Start the call
                try {
                    updateStatus('connecting', 'Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø§ØªØµØ§Ù„...');
                    await vapi.start(VAPI_ASSISTANT_ID); 
                    // Success updates are handled by the 'call-start' event listener
                } catch (error) {
                    console.error('Error starting Vapi call:', error); 
                    updateStatus('disconnected', 'ÙØ´Ù„ Ø§Ù„Ø§ØªØµØ§Ù„. ØªØ­Ù‚Ù‚ Ù…Ù† Ø£Ø°ÙˆÙ†Ø§Øª Ø§Ù„Ù…ÙŠÙƒØ±ÙˆÙÙˆÙ† Ø£Ùˆ Ø³Ø¬Ù„ Ø§Ù„Ø£Ø®Ø·Ø§Ø¡.');
                    updateButton(false);
                    isCallActive = false;
                }
            }
        }
        
        /**
         * Attaches event listeners to the quick action cards.
         */
        function setupQuickActions() {
            document.querySelectorAll('.quick-action-card').forEach(card => {
                card.addEventListener('click', async function() {
                    const promptText = this.getAttribute('data-prompt');
                    
                    if (!isCallActive) {
                        // Start conversation if not active
                        await window.startConversation();
                    }
                    
                    // Send the prompt after a slight delay to ensure connection
                    setTimeout(() => {
                        if (isCallActive && promptText && vapi) {
                            vapi.send({
                                message: {
                                    role: 'user',
                                    content: promptText
                                }
                            });
                            console.log('Sent quick prompt:', promptText);
                        }
                    }, 800); // Increased delay slightly for reliability
                });
            });
        }

        // Run initialization when the DOM is fully loaded
        document.addEventListener('DOMContentLoaded', () => {
            initializeVapi();
            setupQuickActions();
            updateStatus('disconnected', 'ØºÙŠØ± Ù…ØªØµÙ„');
        });
    </script>
</body>
</html>
